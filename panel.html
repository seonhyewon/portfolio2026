<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì¸ë„¤ì¼ íŒì—… ì˜ˆì‹œ</title>
  <style>
    .slider {
  position: relative;
  width: 800px;
  height: 400px;
  margin: 50px auto;
  overflow: hidden;
  border-radius: 10px;
  cursor: grab;
}

.slider:active {
  cursor: grabbing;
}

.slider-track {
  display: flex;
  transition: transform 0.4s ease;
}

.slide {
  flex: 0 0 800px;
  user-select: none;
  pointer-events: none;
}

.slide img {
  width: 100%;
  height: 100%;
  display: block;
  object-fit: cover;
  pointer-events: none;
}

/* ğŸ”˜ í™”ì‚´í‘œ ë²„íŠ¼ */
.arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 45px;
  height: 45px;
  border: none;
  background: rgba(0, 0, 0, 0.5);
  color: white;
  font-size: 28px;
  cursor: pointer;
  border-radius: 50%;
  z-index: 10;
  transition: background 0.3s;
}

.arrow:hover {
  background: rgba(0, 0, 0, 0.7);
}

.arrow.prev {
  left: 15px;
}

.arrow.next {
  right: 15px;
}
.flip-btn {
  padding: 12px 24px;
  font-size: 18px;
  border: none;
  cursor: pointer;
  background: #333;
  color: white;
  perspective: 600px; /* 3D ê³µê°„ê° ë¶€ì—¬ */
}

.flip-btn span {
  display: inline-block;
  transition: transform 0.6s ease;
  transform-origin: center;
  backface-visibility: hidden; /* ë’¤ì§‘í˜”ì„ ë•Œ ë’·ë©´ ìˆ¨ê¸°ê¸° */
}

.flip-btn:hover span {
  transform: rotateX(360deg) translateZ(0);
}




  </style>
</head>
<body>
 <button class="flip-btn">
  <span>Hover Me</span>
</button>


  <div class="slider">
  <div class="slider-track">
    <div class="slide"><img src="https://placehold.co/800x400?text=1"></div>
    <div class="slide"><img src="https://placehold.co/800x400?text=2"></div>
    <div class="slide"><img src="https://placehold.co/800x400?text=3"></div>
  </div>

  <!-- í™”ì‚´í‘œ ë²„íŠ¼ -->
  <button class="arrow prev">&#10094;</button>
  <button class="arrow next">&#10095;</button>
</div>


  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script>
   $(document).ready(function () {
  const $slider = $('.slider');
  const $track = $('.slider-track');
  let $slides = $('.slide');
  const slideWidth = $slides.outerWidth();

  // ì•ë’¤ ë³µì œ
  const $firstClone = $slides.first().clone();
  const $lastClone = $slides.last().clone();

  $track.append($firstClone);
  $track.prepend($lastClone);

  $slides = $('.slide'); // ë³µì œ í¬í•¨
  const totalSlides = $slides.length;

  let currentIndex = 1;          // ì‹¤ì œ ì²« ìŠ¬ë¼ì´ë“œê°€ index 1
  let startX = 0;
  let currentX = 0;
  let isDragging = false;
  let isAnimating = false;       // transition ì¤‘ì¸ì§€ í”Œë˜ê·¸
  let lastTransitionHad = false; // ë°©ê¸ˆ ì‹¤í–‰í•œ moveToSlideì˜ transition ì—¬ë¶€ ì¶”ì 

  // ì´ˆê¸° ìœ„ì¹˜
  $track.css('transform', `translateX(${-slideWidth * currentIndex}px)`);

  function moveToSlide(index, withTransition = true) {
    // index ë³´ì •
    if (index < 0) index = 0;
    if (index > totalSlides - 1) index = totalSlides - 1;

    // ì¤‘ë³µ í˜¸ì¶œ ë°©ì§€ (ì• ë‹ˆë©”ì´ì…˜ ì¤‘ì¸ ê²½ìš°ì—” ë¬´ì‹œ)
    if (isAnimating) return;

    if (withTransition) {
      isAnimating = true;        // transition ì‹œì‘ í‘œì‹œ
      lastTransitionHad = true;
      $track.css('transition', 'transform 0.4s ease');
    } else {
      // ì¦‰ì‹œ ì´ë™ì¼ ë•ŒëŠ” ì• ë‹ˆë©”ì´ì…˜ í”Œë˜ê·¸ë¥¼ ì˜¬ë¦¬ì§€ ì•ŠìŒ(ë˜ëŠ” ì¦‰ì‹œ ë‚´ë¦¼)
      lastTransitionHad = false;
      $track.css('transition', 'none');
    }

    $track.css('transform', `translateX(${-slideWidth * index}px)`);
    currentIndex = index;

    // ë§Œì•½ transitionì´ ì—†ìœ¼ë©´ transitionend ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ì§€ ì•Šìœ¼ë¯€ë¡œ
    // ì¦‰ì‹œ isAnimatingì„ falseë¡œ ì„¤ì •í•´ ì…ë ¥ì„ í—ˆìš©í•œë‹¤.
    if (!withTransition) {
      isAnimating = false;
    }
  }

  function startDrag(x) {
    if (isAnimating) return; // ì• ë‹ˆë©”ì´ì…˜ ì¤‘ì—ëŠ” ë“œë˜ê·¸ ì‹œì‘ ê¸ˆì§€
    isDragging = true;
    startX = x;
    $track.css('transition', 'none');
  }

  function dragging(x) {
    if (!isDragging) return;
    currentX = x;
    const diff = currentX - startX;
    $track.css('transform', `translateX(${-slideWidth * currentIndex + diff}px)`);
  }

  function endDrag() {
    if (!isDragging) return;
    isDragging = false;
    const diff = currentX - startX;

    if (Math.abs(diff) < 50) {
      moveToSlide(currentIndex, true);
      return;
    }

    if (diff > 0) moveToSlide(currentIndex - 1, true);
    else moveToSlide(currentIndex + 1, true);
  }

  // transitionend ì²˜ë¦¬
  $track.on('transitionend', function (e) {
    // ì‹¤ì œë¡œ transitionì´ ë°œìƒí–ˆì„ ë•Œë§Œ ì²˜ë¦¬
    if (!lastTransitionHad) {
      // ì´ì „ì— transitionì´ ì—†ì—ˆìœ¼ë©´ ì—¬ê¸°ë¡œ ë“¤ì–´ì˜¤ì§€ ì•Šì•„ì•¼ í•¨.
      return;
    }

    // transitionì´ ëë‚¬ìœ¼ë‹ˆ ì• ë‹ˆë©”ì´ì…˜ ìƒíƒœ í•´ì œ
    isAnimating = false;
    lastTransitionHad = false;

    // ë¬´í•œ ë£¨í”„ ë³´ì •: ë³µì œ ì˜ì—­ì— ì§„ì…í–ˆìœ¼ë©´ ì‹¤ì œ ìœ„ì¹˜ë¡œ ì¦‰ì‹œ ì í”„ (transition ì—†ì´)
    if (currentIndex === totalSlides - 1) {
      // ë§ˆì§€ë§‰(ì•ì—ì„œ ë¶™ì¸ ì²«ë²ˆì§¸ clone)ì— ë„ë‹¬ -> ì‹¤ì œ ì²« ìŠ¬ë¼ì´ë“œ(1)ë¡œ ì í”„
      moveToSlide(1, false);
    } else if (currentIndex === 0) {
      // ì²«ë²ˆì§¸(ë’¤ì—ì„œ ë¶™ì¸ ë§ˆì§€ë§‰ clone)ì— ë„ë‹¬ -> ì‹¤ì œ ë§ˆì§€ë§‰ ìŠ¬ë¼ì´ë“œ(totalSlides-2)ë¡œ ì í”„
      moveToSlide(totalSlides - 2, false);
    }
  });

  // ğŸ–±ï¸ PC ë“œë˜ê·¸
  $slider.on('mousedown', function (e) {
    e.preventDefault();
    startDrag(e.pageX);
  });

  $(document).on('mousemove', function (e) {
    if (isDragging) dragging(e.pageX);
  });

  $(document).on('mouseup', function () {
    endDrag();
  });

  // ğŸ“± ëª¨ë°”ì¼ í„°ì¹˜
  $slider.on('touchstart', function (e) {
    startDrag(e.originalEvent.touches[0].pageX);
  });

  $slider.on('touchmove', function (e) {
    dragging(e.originalEvent.touches[0].pageX);
    e.preventDefault();
  });

  $slider.on('touchend', function () {
    endDrag();
  });

  // â¬…ï¸â¡ï¸ í™”ì‚´í‘œ ë²„íŠ¼ (í´ë¦­ ì‹œ isAnimating ì²´í¬ ìë™ ì ìš©)
  $('.arrow.prev').on('click', function () {
    moveToSlide(currentIndex - 1, true);
  });

  $('.arrow.next').on('click', function () {
    moveToSlide(currentIndex + 1, true);
  });
});






  </script>
  

</body>
</html>
